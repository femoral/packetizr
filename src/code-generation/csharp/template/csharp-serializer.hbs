using System;
using System.IO;

public class {{modelType}}PacketSerializer : IPacketSerializer<{{modelType}}> {
    public byte[] Serialize({{modelType}} message) {
        using (var m = new MemoryStream())
        {
            using (var w = new BinaryWriter(m))
            {
                w.Write(BitConverter.GetBytes({{modelType}}.Header));
            {{#each fields as |field|}}
                w.Write(BitConverter.GetBytes(message.{{field}}));
            {{/each}}
                return m.ToArray();
            }
        }
    }
}